1. Fix sword bug
2. restructure code